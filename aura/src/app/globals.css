@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* Light theme: Soft gray scale, ensuring silence and comfort */
    --background: 0 0% 96%;         /* #f5f5f5 - Base background */
    --foreground: 0 0% 18%;         /* #2e2e2e - Main text */

    --card: 0 0% 100%;              /* #ffffff - Content container */
    --card-foreground: 0 0% 18%;    /* #2e2e2e - Card text */

    --popover: 0 0% 100%;
    --popover-foreground: 0 0% 16%;

    --primary: 0 0% 12%;            /* #1f1f1f - Primary interactive button */
    --primary-foreground: 0 0% 98%; /* #fafafa - Button text */

    --secondary: 0 0% 90%;          /* #e6e6e6 - Secondary background */
    --secondary-foreground: 0 0% 40%;/* #666666 - Secondary text */

    --muted: 0 0% 88%;              /* #e1e1e1 - Muted area */
    --muted-foreground: 0 0% 45%;   /* #737373 - Muted text */

    --accent: 0 0% 86%;             /* #dadada - Hover/accent */
    --accent-foreground: 0 0% 20%;  /* #333333 - Accent text */

    --border: 0 0% 82%;             /* #d2d2d2 - Border */
    --border-hover: 0 0% 78%;       /* Hover border - Slightly darker (4% difference, matches silence principle) */
    --input: 0 0% 82%;
    --ring: 0 0% 18%;               /* Focus ring */

    --radius: 0.75rem;
  }

  .dark {
    /* Dark theme: Grayscale moderation palette */
    --background: 0 0% 10%;         /* #1a1a1a - Core background */
    --foreground: 0 0% 75%;         /* #bfbfbf - Main text */

    --card: 0 0% 12%;               /* #1f1f1f - Content area/input background */
    --card-foreground: 0 0% 85%;    /* #d9d9d9 - Main text in card */

    --popover: 0 0% 8%;
    --popover-foreground: 0 0% 85%;

    --primary: 0 0% 90%;            /* #e6e6e6 - Primary interactive element */
    --primary-foreground: 0 0% 10%;

    --secondary: 0 0% 14%;          /* #242424 - Secondary background/hover */
    --secondary-foreground: 0 0% 60%; /* #999999 - Secondary/muted text */

    --muted: 0 0% 14%;
    --muted-foreground: 0 0% 60%;

    --accent: 0 0% 14%;
    --accent-foreground: 0 0% 90%;

    --border: 0 0% 18%;             /* #2e2e2e - Border */
    --border-hover: 0 0% 22%;       /* Hover border - Slightly brighter (4% difference, matches silence principle) */
    --input: 0 0% 18%;
    --ring: 0 0% 90%;               /* Focus ring */

    --radius: 0.75rem;
  }
}

@layer base {
  * { @apply border-border; }
  body {
    @apply bg-background text-foreground antialiased;
    font-feature-settings: "rlig" 1, "calt" 1;
  }

  /* Text selection styling - grayscale moderation philosophy */
  ::selection {
    background: hsl(var(--foreground) / 0.15); /* Light mode: subtle dark gray highlight */
    color: inherit; /* Maintain text color for readability */
  }

  .dark ::selection {
    background: hsl(var(--foreground) / 0.25); /* Dark mode: slightly stronger light gray highlight */
    color: inherit;
  }
}

@layer utilities {
  /* Precise, unified Prose style - Following grayscale moderation design philosophy */
  .prose {
    @apply text-foreground max-w-none;
    line-height: 1.75;
  }

  /* Base spacing - Exclude lists, let custom components control */
  .prose p, .prose blockquote, .prose pre {
    @apply my-4;
  }
  .prose :first-child { @apply mt-0; }
  .prose :last-child { @apply mb-0; }

  /* Inline code style - Consistent with components */
  .prose code:not(pre code) {
    @apply inline px-1.5 py-0.5 text-base font-mono bg-muted/40 text-foreground rounded-sm break-words;
  }

  /* List style - Use CSS to handle nesting */
  .prose ul, .prose ol {
    @apply list-none pl-0;
  }

  /* Special nested list style */
  .prose ul ul, .prose ol ol, .prose ul ol, .prose ol ul {
    @apply mb-0 pl-4;
  }

  /* Uniform and compact list spacing */
  .prose ul,
  .prose ol,
  .prose li {
    @apply m-0 p-0 list-inside;
  }

  .prose li {
    @apply pl-5 md:pl-6;
  }

  /* Apply uniform compact spacing to all list items (same level, parent-child) */
  .prose li + li,
  .prose li > ul,
  .prose li > ol {
    @apply mt-2;
  }

  .prose li > p {
    @apply my-0;
  }


  /* Link style */
  .prose a {
    @apply text-foreground underline decoration-secondary-foreground/30 decoration-1 underline-offset-2;
    @apply transition-all duration-150 ease-out;
  }
  .prose a:hover {
    @apply text-primary decoration-secondary-foreground/50;
  }

  /* Emphasized text */
  .prose strong {
    @apply font-semibold text-foreground;
  }

  .prose em {
    @apply italic text-foreground;
  }

  /* Scrollbar style */
  ::-webkit-scrollbar {
    width: 8px;  /* Vertical scrollbar width */
    height: 8px; /* Horizontal scrollbar height */
  }
  ::-webkit-scrollbar-track {
    background: transparent;
  }
  ::-webkit-scrollbar-thumb {
    background: hsl(var(--border) / 0.6);
    border-radius: 9999px;
  }
  ::-webkit-scrollbar-thumb:hover {
    background: hsl(var(--border));
  }
}

