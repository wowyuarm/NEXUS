# render.yaml
# Blueprint for deploying the NEXUS backend on Render.com
# Frontend (AURA) is now deployed on Vercel - see docs/developer_guides/05_DEPLOYMENT_GUIDE.md

services:
  #--------------------------------
  # NEXUS Backend Service
  #--------------------------------
  - name: nexus-backend
    type: web
    env: docker
    repo: https://github.com/wowyuarm/NEXUS
    dockerfilePath: ./nexus/Dockerfile
    plan: free
    region: singapore
      
    # Environment variables
    envVars:
      # Python configuration
      - key: PYTHON_VERSION
        value: "3.11"
      - key: PYTHONPATH
        value: "/app"
      - key: PYTHONUNBUFFERED
        value: "1"
        
      # LLM Provider Keys - Set these in Render Dashboard > Environment > Secrets
      # sync: false means these are secrets that need to be set in the dashboard
      - key: GEMINI_API_KEY
        sync: false
      - key: OPENROUTER_API_KEY
        sync: false
      - key: DEEPSEEK_API_KEY
        sync: false
        
      # Database configuration
      - key: MONGO_URI
        sync: false
        
      # Search provider configuration
      - key: TAVILY_API_KEY
        sync: false
        
      - key: ALLOWED_ORIGINS
        value: "http://localhost:5173,http://127.0.0.1:5173"
        # Production: Add your Vercel domain in Render Dashboard
        # Example: https://your-app.vercel.app
        # Also supports custom domains: https://app.yxnexus.com

      # Service configuration
      - key: NEXUS_ENV
        value: "production"
      - key: LOG_LEVEL
        value: "INFO"
        
  # Frontend (AURA) is deployed on Vercel
  # See docs/developer_guides/05_DEPLOYMENT_GUIDE.md for Vercel deployment instructions
        
#--------------------------------
# Deployment Instructions
#--------------------------------

# Backend (Render):
# 1. Set environment variables in Render Dashboard > Environment > Secrets:
#    - GEMINI_API_KEY
#    - OPENROUTER_API_KEY  
#    - DEEPSEEK_API_KEY
#    - MONGO_URI
#    - TAVILY_API_KEY
#    - ALLOWED_ORIGINS (add your Vercel domain)
#
# 2. Ensure MongoDB Atlas allows Render IP ranges
#
# Frontend (Vercel):
# See docs/developer_guides/05_DEPLOYMENT_GUIDE.md for complete instructions
